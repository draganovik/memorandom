var z=Object.defineProperty;var y=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var C=(_,s,e)=>s in _?z(_,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):_[s]=e,w=(_,s)=>{for(var e in s||(s={}))E.call(s,e)&&C(_,e,s[e]);if(y)for(var e of y(s))A.call(s,e)&&C(_,e,s[e]);return _};import{_ as B}from"./icon-menu.57281e8d.js";import{u as I,a as S,x as m,r as T,o as b,b as u,d as t,e as U,w as G,t as i,f as a,F as V,h as O,y as R,n as P,z as $,A as g}from"./vendor.c385f223.js";import{_ as F,a as q,b as H,c as J,d as K,e as W,f as Z,g as Q,h as X,i as Y,j as ee,k as se,l as te,m as ae,n as oe,o as re,p as le,q as _e,r as ne,s as de,t as ie,u as ge,v as ve,w as ce,x as pe,y as be,z as ue,A as he,B as fe,C as me,D as ke,E as xe,F as ye,G as Ce,H as we,I as Se,J as Ue,K as Ge,L as Re,M as je}from"./index.778e46db.js";class j{constructor(s){this._settings=s,this.steps=0,this._loadAssets(),this._prepareCards()}StartGame(){this._gameState="running",this.steps=0}EndGame(){this._gameState="ended"}_prepareCards(){this._cards=[];const s=Math.floor(this._settings.rows*this._settings.columns/2);let e=this._shuffleCards(this._cardSet).slice(0,s);e=e.concat(e.map(o=>w({},o)));for(let o=0;o<e.length;o++)e[o].id=o;this._cards=this._shuffleCards(e)}_shuffleCards(s){return s.map(e=>({value:e,sort:Math.random()})).sort((e,o)=>e.sort-o.sort).map(({value:e})=>e)}_loadAssets(){switch(this._settings.cardDesign){case"developer":this._loadObverseDeveloper();break;default:this._loadObverseDefault();break}this._reverseURL=new URL({"../assets/reverse/default.png":F,"../assets/reverse/flora.png":q,"../assets/reverse/retro.png":H,"../assets/reverse/royal.png":J}[`../assets/reverse/${this._settings.backDesign}.png`],self.location).href}async _loadObverseDeveloper(){this._cardSet=[];for(var s=1;s<37;s++)this._cardSet.push({faceUp:!1,imageUrl:new URL({"../assets/obverse/developer/design-back-dev-1.png":K,"../assets/obverse/developer/design-back-dev-10.png":W,"../assets/obverse/developer/design-back-dev-11.png":Z,"../assets/obverse/developer/design-back-dev-12.png":Q,"../assets/obverse/developer/design-back-dev-13.png":X,"../assets/obverse/developer/design-back-dev-14.png":Y,"../assets/obverse/developer/design-back-dev-15.png":ee,"../assets/obverse/developer/design-back-dev-16.png":se,"../assets/obverse/developer/design-back-dev-17.png":te,"../assets/obverse/developer/design-back-dev-18.png":ae,"../assets/obverse/developer/design-back-dev-19.png":oe,"../assets/obverse/developer/design-back-dev-2.png":re,"../assets/obverse/developer/design-back-dev-20.png":le,"../assets/obverse/developer/design-back-dev-21.png":_e,"../assets/obverse/developer/design-back-dev-22.png":ne,"../assets/obverse/developer/design-back-dev-23.png":de,"../assets/obverse/developer/design-back-dev-24.png":ie,"../assets/obverse/developer/design-back-dev-25.png":ge,"../assets/obverse/developer/design-back-dev-26.png":ve,"../assets/obverse/developer/design-back-dev-27.png":ce,"../assets/obverse/developer/design-back-dev-28.png":pe,"../assets/obverse/developer/design-back-dev-29.png":be,"../assets/obverse/developer/design-back-dev-3.png":ue,"../assets/obverse/developer/design-back-dev-30.png":he,"../assets/obverse/developer/design-back-dev-31.png":fe,"../assets/obverse/developer/design-back-dev-32.png":me,"../assets/obverse/developer/design-back-dev-33.png":ke,"../assets/obverse/developer/design-back-dev-34.png":xe,"../assets/obverse/developer/design-back-dev-35.png":ye,"../assets/obverse/developer/design-back-dev-36.png":Ce,"../assets/obverse/developer/design-back-dev-4.png":we,"../assets/obverse/developer/design-back-dev-5.png":Se,"../assets/obverse/developer/design-back-dev-6.png":Ue,"../assets/obverse/developer/design-back-dev-7.png":Ge,"../assets/obverse/developer/design-back-dev-8.png":Re,"../assets/obverse/developer/design-back-dev-9.png":je}[`../assets/obverse/developer/design-back-dev-${s}.png`],self.location).href})}getGameState(){return this._gameState}getPlayingCards(){return this._cards}getReverseURL(){return this._reverseURL}}const De={class:"play relative p-3 h-screen"},Le={class:"grid gap-4 grid-cols-3 grid-rows-1 h-12 lg:absolute lg:grid-cols-1 lg:grid-rows-3 lg:h-auto"},Me=t("img",{class:"hover:bg-gray-700/70 h-full rounded",src:B,alt:"menu"},null,-1),Ne={class:"text-center lg:text-left"},ze=t("h1",{class:"text-gray-400"},"Vreme igre:",-1),Ee={class:"text-2xl font-bold"},Ae={class:"text-right lg:text-left"},Be=t("h2",{class:"text-gray-400"},"Broj poteza:",-1),Ie={class:"text-2xl font-bold"},Te=["onClick"],Ve=["src"],Oe=["src"],Pe={key:0,class:"absolute left-1/2 top-1/2 flex flex-col gap-5 justify-center p-8 pt-10 w-full h-full text-center bg-gray-800 rounded opacity-95 transform -translate-x-1/2 -translate-y-1/2 md:max-w-2xl md:h-auto md:border md:border-green-700 md:opacity-100"},$e=t("p",{class:"text-6xl"},"\u{1F973}",-1),Fe=t("h1",{class:"text-green-300 text-3xl font-bold"}," Uspeh, uparili ste sve kartice! ",-1),qe={class:"text-lg"},He=g(" Re\u0161ili ste tabelu "),Je=t("br",null,null,-1),Ke=g(" za "),We=g(" sa "),Ze=g(" koraka "),Qe={class:"flex gap-4 mx-auto"},Xe=g(" PO\u010CETNI MENI"),as={setup(_){const s=I(),e=S(()=>s.state.gameSettings),o=S(()=>h.value==r.value._cards.length);let r=m(new j(e.value)),v=m("Nije po\u010Deto"),h=m(0),n=[];function D(){r.value=new j(e.value),v.value="Nije po\u010Deto",h.value=0}function L(d){d.faceUp||(r.value.getGameState()!="running"&&(r.value.StartGame(),M(Date.now())),r.value.getGameState()=="running"&&(d.faceUp=!0,n.push(d),r.value.steps++,n.length>1&&setTimeout(function(){n.length>1&&(n[0].imageUrl==n[1].imageUrl?(h.value+=2,o.value&&r.value.EndGame()):(n[0].faceUp=!1,n[1].faceUp=!1),n.splice(0,2))},1200)))}function M(d){let c=setInterval(function(){var p=new Date().getTime(),l=p-d,f=Math.floor(l/(1e3*60*60*24)),k=Math.floor(l%(1e3*60*60*24)/(1e3*60*60)),x=Math.floor(l%(1e3*60*60)/(1e3*60)),N=Math.floor(l%(1e3*60)/1e3);v.value=(f>0?f+"d ":"")+(k>0?k+"h ":"")+(x>0?x+"m ":"")+N+"s",r.value.getGameState()=="ended"&&clearInterval(c)},1e3)}return(d,c)=>{const p=T("router-link");return b(),u("main",De,[t("section",Le,[t("div",null,[U(p,{to:"/"},{default:G(()=>[Me]),_:1})]),t("div",Ne,[ze,t("p",Ee,i(a(v)),1)]),t("div",Ae,[Be,t("p",Ie,i(a(r).steps),1)])]),t("section",{class:R(["board grid gap-1 m-auto mt-8 p-2 lg:mt-20",{dimmed:a(o)}]),style:P({gridTemplateColumns:"repeat("+a(e).columns+", 1fr)",maxWidth:"calc((90vh - 5.5rem) * "+a(e).columns*.705/a(e).rows+")"})},[(b(!0),u(V,null,O(a(r).getPlayingCards(),l=>(b(),u("button",{key:l.id,class:"flip-card hover:translate-x-1 hover:rotate-3",onClick:f=>L(l)},[t("div",{class:R(["flip-card-inner ratio-narrow",{flip:l.faceUp}])},[t("img",{class:"flip-card-reverse w-full",src:a(r).getReverseURL(),alt:"Zadnja strana"},null,8,Ve),t("img",{class:"flip-card-obverse",src:l.imageUrl,alt:"Prednja strana"},null,8,Oe)],2)],8,Te))),128))],6),a(o)?(b(),u("section",Pe,[$e,Fe,t("p",qe,[He,t("b",null,i(a(e).columns)+"x"+i(a(e).rows),1),Je,Ke,t("b",null,i(a(v)),1),We,t("b",null,i(a(r).steps),1),Ze]),t("div",Qe,[t("button",{class:"button",onClick:c[0]||(c[0]=l=>D())},"NOVA IGRA"),U(p,{to:"/",class:"button"},{default:G(()=>[Xe]),_:1})])])):$("",!0)])}}};export{as as default};
