var A=Object.defineProperty;var U=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var w=(o,s,e)=>s in o?A(o,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[s]=e,S=(o,s)=>{for(var e in s||(s={}))D.call(s,e)&&w(o,e,s[e]);if(U)for(var e of U(s))E.call(s,e)&&w(o,e,s[e]);return o};import{_ as O}from"./icon-menu.57281e8d.js";import{u as T,a as M,x as h,r as V,o as v,b as p,d as a,e as R,w as j,t as i,f as _,n as f,y as m,F as $,h as B,z as I,A as g}from"./vendor.c385f223.js";import{_ as P,a as F,b as Z,c as q,d as W,e as H,f as J,g as K,h as Q,i as X,j as Y,k as ss,l as es,m as as,n as ls,o as _s,p as ts,q as cs,r as os,s as ns,t as rs,u as is,v as gs,w as ds,x as bs,y as vs,z as ps,A as us,B as ks,C as hs,D as fs,E as ms,F as xs,G as Cs,H as ys,I as Us,J as ws,K as Ss,L as Ms,M as Rs,N as js,O as Gs,P as Ls,Q as Ns,R as zs,S as As,T as Ds,U as Es,V as Os,W as Ts,X as Vs,Y as $s,Z as Bs,$ as Is,a0 as Ps,a1 as Fs,a2 as Zs,a3 as qs,a4 as Ws,a5 as Hs,a6 as Js,a7 as Ks,a8 as Qs,a9 as Xs,aa as Ys,ab as se,ac as ee,ad as ae,ae as le,af as _e,ag as te,ah as ce,ai as oe,aj as ne,ak as re,al as ie,am as ge,an as de,ao as be,ap as ve,aq as pe,ar as ue,as as ke,at as he,au as fe,av as me,aw as xe,ax as Ce,ay as ye,az as Ue,aA as we}from"./index.816fd010.js";class G{constructor(s){this._settings=s,this.steps=0,this._loadAssets(),this._prepareCards(),this.setMainCard()}setMainCard(){let s=this._cards.map(e=>S({},e));this._gameState=="running"&&(s=s.filter(e=>e.found!=!0)),this._mainCard=s[Math.floor(Math.random()*s.length)],this._mainCard.faceUp=!this._mainCard.faceUp}StartGame(){this._cards.forEach(s=>{s.faceUp=!1}),this._gameState="running",this.steps=0}EndGame(){this._gameState="ended"}_prepareCards(){this._cards=[];const s=this._settings.rows*this._settings.columns;let e=this._cardSet.slice(0,s);for(let c=0;c<e.length;c++)e[c].id=c;this._cards=this._shuffleCards(e)}_shuffleCards(s){return s.map(e=>({value:e,sort:Math.random()})).sort((e,c)=>e.sort-c.sort).map(({value:e})=>e)}_loadAssets(){switch(this._settings.obverseDesign){case"developer":this._loadObverseDeveloper();break;default:this._loadObverseClassical();break}this._reverseURL=new URL({"../assets/reverse/default.png":P,"../assets/reverse/flora.png":F,"../assets/reverse/retro.png":Z,"../assets/reverse/royal.png":q}[`../assets/reverse/${this._settings.reverseDesign}.png`],self.location).href}async _loadObverseDeveloper(){this._cardSet=[];for(var s=1;s<37;s++)this._cardSet.push({faceUp:!0,imageUrl:new URL({"../assets/obverse/developer/design-back-dev-1.png":W,"../assets/obverse/developer/design-back-dev-10.png":H,"../assets/obverse/developer/design-back-dev-11.png":J,"../assets/obverse/developer/design-back-dev-12.png":K,"../assets/obverse/developer/design-back-dev-13.png":Q,"../assets/obverse/developer/design-back-dev-14.png":X,"../assets/obverse/developer/design-back-dev-15.png":Y,"../assets/obverse/developer/design-back-dev-16.png":ss,"../assets/obverse/developer/design-back-dev-17.png":es,"../assets/obverse/developer/design-back-dev-18.png":as,"../assets/obverse/developer/design-back-dev-19.png":ls,"../assets/obverse/developer/design-back-dev-2.png":_s,"../assets/obverse/developer/design-back-dev-20.png":ts,"../assets/obverse/developer/design-back-dev-21.png":cs,"../assets/obverse/developer/design-back-dev-22.png":os,"../assets/obverse/developer/design-back-dev-23.png":ns,"../assets/obverse/developer/design-back-dev-24.png":rs,"../assets/obverse/developer/design-back-dev-25.png":is,"../assets/obverse/developer/design-back-dev-26.png":gs,"../assets/obverse/developer/design-back-dev-27.png":ds,"../assets/obverse/developer/design-back-dev-28.png":bs,"../assets/obverse/developer/design-back-dev-29.png":vs,"../assets/obverse/developer/design-back-dev-3.png":ps,"../assets/obverse/developer/design-back-dev-30.png":us,"../assets/obverse/developer/design-back-dev-31.png":ks,"../assets/obverse/developer/design-back-dev-32.png":hs,"../assets/obverse/developer/design-back-dev-33.png":fs,"../assets/obverse/developer/design-back-dev-34.png":ms,"../assets/obverse/developer/design-back-dev-35.png":xs,"../assets/obverse/developer/design-back-dev-36.png":Cs,"../assets/obverse/developer/design-back-dev-4.png":ys,"../assets/obverse/developer/design-back-dev-5.png":Us,"../assets/obverse/developer/design-back-dev-6.png":ws,"../assets/obverse/developer/design-back-dev-7.png":Ss,"../assets/obverse/developer/design-back-dev-8.png":Ms,"../assets/obverse/developer/design-back-dev-9.png":Rs}[`../assets/obverse/developer/design-back-dev-${s}.png`],self.location).href})}async _loadObverseClassical(){this._cardSet=[];for(var s=1;s<52;s++)this._cardSet.push({faceUp:!0,imageUrl:new URL({"../assets/obverse/classical/design-back-classic-1.png":js,"../assets/obverse/classical/design-back-classic-10.png":Gs,"../assets/obverse/classical/design-back-classic-11.png":Ls,"../assets/obverse/classical/design-back-classic-12.png":Ns,"../assets/obverse/classical/design-back-classic-13.png":zs,"../assets/obverse/classical/design-back-classic-14.png":As,"../assets/obverse/classical/design-back-classic-15.png":Ds,"../assets/obverse/classical/design-back-classic-16.png":Es,"../assets/obverse/classical/design-back-classic-17.png":Os,"../assets/obverse/classical/design-back-classic-18.png":Ts,"../assets/obverse/classical/design-back-classic-19.png":Vs,"../assets/obverse/classical/design-back-classic-2.png":$s,"../assets/obverse/classical/design-back-classic-20.png":Bs,"../assets/obverse/classical/design-back-classic-21.png":Is,"../assets/obverse/classical/design-back-classic-22.png":Ps,"../assets/obverse/classical/design-back-classic-23.png":Fs,"../assets/obverse/classical/design-back-classic-24.png":Zs,"../assets/obverse/classical/design-back-classic-25.png":qs,"../assets/obverse/classical/design-back-classic-26.png":Ws,"../assets/obverse/classical/design-back-classic-27.png":Hs,"../assets/obverse/classical/design-back-classic-28.png":Js,"../assets/obverse/classical/design-back-classic-29.png":Ks,"../assets/obverse/classical/design-back-classic-3.png":Qs,"../assets/obverse/classical/design-back-classic-30.png":Xs,"../assets/obverse/classical/design-back-classic-31.png":Ys,"../assets/obverse/classical/design-back-classic-32.png":se,"../assets/obverse/classical/design-back-classic-33.png":ee,"../assets/obverse/classical/design-back-classic-34.png":ae,"../assets/obverse/classical/design-back-classic-35.png":le,"../assets/obverse/classical/design-back-classic-36.png":_e,"../assets/obverse/classical/design-back-classic-37.png":te,"../assets/obverse/classical/design-back-classic-38.png":ce,"../assets/obverse/classical/design-back-classic-39.png":oe,"../assets/obverse/classical/design-back-classic-4.png":ne,"../assets/obverse/classical/design-back-classic-40.png":re,"../assets/obverse/classical/design-back-classic-41.png":ie,"../assets/obverse/classical/design-back-classic-42.png":ge,"../assets/obverse/classical/design-back-classic-43.png":de,"../assets/obverse/classical/design-back-classic-44.png":be,"../assets/obverse/classical/design-back-classic-45.png":ve,"../assets/obverse/classical/design-back-classic-46.png":pe,"../assets/obverse/classical/design-back-classic-47.png":ue,"../assets/obverse/classical/design-back-classic-48.png":ke,"../assets/obverse/classical/design-back-classic-49.png":he,"../assets/obverse/classical/design-back-classic-5.png":fe,"../assets/obverse/classical/design-back-classic-50.png":me,"../assets/obverse/classical/design-back-classic-51.png":xe,"../assets/obverse/classical/design-back-classic-6.png":Ce,"../assets/obverse/classical/design-back-classic-7.png":ye,"../assets/obverse/classical/design-back-classic-8.png":Ue,"../assets/obverse/classical/design-back-classic-9.png":we}[`../assets/obverse/classical/design-back-classic-${s}.png`],self.location).href})}getGameState(){return this._gameState}getPlayingCards(){return this._cards}getMainCard(){return this._mainCard}getReverseURL(){return this._reverseURL}}const Se={class:"play relative p-3 h-screen"},Me={class:"grid gap-4 grid-cols-3 grid-rows-1 h-12 lg:absolute lg:grid-cols-1 lg:grid-rows-3 lg:h-auto"},Re=a("img",{class:"hover:bg-gray-700/70 h-full rounded",src:O,alt:"menu"},null,-1),je={class:"text-center lg:text-left"},Ge=a("h1",{class:"text-gray-400"},"Vreme igre:",-1),Le={class:"text-2xl font-bold"},Ne={class:"text-right lg:text-left"},ze=a("h2",{class:"text-gray-400"},"Broj poteza:",-1),Ae={class:"text-2xl font-bold"},De=["src"],Ee=["src"],Oe=["onClick"],Te=["src"],Ve=["src"],$e={key:0,class:"absolute left-1/2 top-1/2 flex flex-col gap-5 justify-center p-8 pt-10 w-full h-full text-center bg-gray-800 rounded opacity-95 transform -translate-x-1/2 -translate-y-1/2 md:max-w-2xl md:h-auto md:border md:border-green-700 md:opacity-100"},Be=a("p",{class:"text-6xl"},"\u{1F38A} \u{1F973} \u{1F38A}",-1),Ie=a("h1",{class:"text-green-300 text-3xl font-bold"}," Uspeh, prona\u0161li ste sve kartice! ",-1),Pe={class:"text-lg"},Fe=g(" Re\u0161ili ste tabelu "),Ze=a("br",null,null,-1),qe=g(" za "),We=g(" sa "),He=g(" koraka "),Je={class:"flex gap-4 mx-auto"},Ke=g(" PO\u010CETNI MENI"),ea={setup(o){const s=T(),e=M(()=>s.state.gameSettings),c=M(()=>u.value==l.value._cards.length);let l=h(new G(e.value)),d=h("Nije po\u010Deto"),u=h(0);function L(){l.value=new G(e.value),d.value="Nije po\u010Deto",u.value=0}function x(n){n.faceUp||(l.value.getGameState()!="running"?(l.value.StartGame(),n.faceUp=!0,N(Date.now())):l.value.getGameState()=="running"&&(n.faceUp=!0,l.value.steps++,setTimeout(function(){n.imageUrl==l.value.getMainCard().imageUrl?(u.value++,n.found=!0,c.value&&l.value.EndGame(),l.value.setMainCard()):n.faceUp=!1},1200)))}function N(n){let r=setInterval(function(){var b=new Date().getTime(),t=b-n,k=Math.floor(t/(1e3*60*60*24)),C=Math.floor(t%(1e3*60*60*24)/(1e3*60*60)),y=Math.floor(t%(1e3*60*60)/(1e3*60)),z=Math.floor(t%(1e3*60)/1e3);d.value=(k>0?k+"d ":"")+(C>0?C+"h ":"")+(y>0?y+"m ":"")+z+"s",l.value.getGameState()=="ended"&&clearInterval(r)},1e3)}return(n,r)=>{const b=V("router-link");return v(),p("main",Se,[a("section",Me,[a("div",null,[R(b,{to:"/"},{default:j(()=>[Re]),_:1})]),a("div",je,[Ge,a("p",Le,i(_(d)),1)]),a("div",Ne,[ze,a("p",Ae,i(_(l).steps),1)])]),a("div",{class:"m-auto mt-8 p-2 text-center lg:mt-20",style:f({maxWidth:"calc((90vh - 5.5rem) * "+_(e).columns*.705/(_(e).rows+1)+")"})},[a("button",{style:f({width:"calc(100%/"+_(e).columns+")"}),class:"flip-card row-span-full hover:translate-x-1 hover:rotate-3",onClick:r[0]||(r[0]=t=>x(_(l).getMainCard()))},[a("div",{class:m(["flip-card-inner ratio-narrow",{flip:_(l).getMainCard().faceUp}])},[a("img",{class:"flip-card-reverse w-full",src:_(l).getReverseURL(),alt:"Zadnja strana"},null,8,De),a("img",{class:"flip-card-obverse",src:_(l).getMainCard().imageUrl,alt:"Prednja strana"},null,8,Ee)],2)],4),a("section",{class:m(["grid gap-1",{dimmed:_(c)}]),style:f({gridTemplateColumns:"repeat("+_(e).columns+", 1fr)"})},[(v(!0),p($,null,B(_(l).getPlayingCards(),t=>(v(),p("button",{key:t.id,class:"flip-card hover:translate-x-1 hover:rotate-3",onClick:k=>x(t)},[a("div",{class:m(["flip-card-inner ratio-narrow",{flip:t.faceUp}])},[a("img",{class:"flip-card-reverse w-full",src:_(l).getReverseURL(),alt:"Zadnja strana"},null,8,Te),a("img",{class:"flip-card-obverse",src:t.imageUrl,alt:"Prednja strana"},null,8,Ve)],2)],8,Oe))),128))],6)],4),_(c)?(v(),p("section",$e,[Be,Ie,a("p",Pe,[Fe,a("b",null,i(_(e).columns)+"x"+i(_(e).rows),1),Ze,qe,a("b",null,i(_(d)),1),We,a("b",null,i(_(l).steps),1),He]),a("div",Je,[a("button",{class:"button",onClick:r[1]||(r[1]=t=>L())},"NOVA IGRA"),R(b,{to:"/",class:"button"},{default:j(()=>[Ke]),_:1})])])):I("",!0)])}}};export{ea as default};
