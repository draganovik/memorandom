var E=Object.defineProperty;var w=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var U=(n,s,e)=>s in n?E(n,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[s]=e,M=(n,s)=>{for(var e in s||(s={}))z.call(s,e)&&U(n,e,s[e]);if(w)for(var e of w(s))A.call(s,e)&&U(n,e,s[e]);return n};import{_ as B}from"./icon-menu.57281e8d.js";import{u as I,a as S,x as f,r as T,o as p,b,d as t,e as R,w as j,t as i,f as o,n as m,y as k,F as V,h as O,z as P,A as g}from"./vendor.c385f223.js";import{_ as $,a as F,b as Z,c as q,d as H,e as J,f as K,g as W,h as Q,i as X,j as Y,k as ee,l as se,m as te,n as ae,o as oe,p as re,q as le,r as ne,s as _e,t as de,u as ie,v as ge,w as ve,x as ce,y as pe,z as be,A as ue,B as he,C as fe,D as me,E as ke,F as xe,G as Ce,H as ye,I as we,J as Ue,K as Me,L as Se,M as Re}from"./index.778e46db.js";class G{constructor(s){this._settings=s,this.steps=0,this._loadAssets(),this._prepareCards(),this.setMainCard()}setMainCard(){let s=this._cards.map(e=>M({},e));this._gameState=="running"&&(s=s.filter(e=>e.found!=!0)),this._mainCard=s[Math.floor(Math.random()*s.length)],this._mainCard.faceUp=!this._mainCard.faceUp}StartGame(){this._cards.forEach(s=>{s.faceUp=!1}),this._gameState="running",this.steps=0}EndGame(){this._gameState="ended"}_prepareCards(){this._cards=[];const s=this._settings.rows*this._settings.columns;let e=this._cardSet.slice(0,s);for(let l=0;l<e.length;l++)e[l].id=l;this._cards=this._shuffleCards(e)}_shuffleCards(s){return s.map(e=>({value:e,sort:Math.random()})).sort((e,l)=>e.sort-l.sort).map(({value:e})=>e)}_loadAssets(){switch(this._settings.cardDesign){case"developer":this._loadObverseDeveloper();break;default:this._loadObverseDefault();break}this._reverseURL=new URL({"../assets/reverse/default.png":$,"../assets/reverse/flora.png":F,"../assets/reverse/retro.png":Z,"../assets/reverse/royal.png":q}[`../assets/reverse/${this._settings.backDesign}.png`],self.location).href}async _loadObverseDeveloper(){this._cardSet=[];for(var s=1;s<37;s++)this._cardSet.push({faceUp:!0,imageUrl:new URL({"../assets/obverse/developer/design-back-dev-1.png":H,"../assets/obverse/developer/design-back-dev-10.png":J,"../assets/obverse/developer/design-back-dev-11.png":K,"../assets/obverse/developer/design-back-dev-12.png":W,"../assets/obverse/developer/design-back-dev-13.png":Q,"../assets/obverse/developer/design-back-dev-14.png":X,"../assets/obverse/developer/design-back-dev-15.png":Y,"../assets/obverse/developer/design-back-dev-16.png":ee,"../assets/obverse/developer/design-back-dev-17.png":se,"../assets/obverse/developer/design-back-dev-18.png":te,"../assets/obverse/developer/design-back-dev-19.png":ae,"../assets/obverse/developer/design-back-dev-2.png":oe,"../assets/obverse/developer/design-back-dev-20.png":re,"../assets/obverse/developer/design-back-dev-21.png":le,"../assets/obverse/developer/design-back-dev-22.png":ne,"../assets/obverse/developer/design-back-dev-23.png":_e,"../assets/obverse/developer/design-back-dev-24.png":de,"../assets/obverse/developer/design-back-dev-25.png":ie,"../assets/obverse/developer/design-back-dev-26.png":ge,"../assets/obverse/developer/design-back-dev-27.png":ve,"../assets/obverse/developer/design-back-dev-28.png":ce,"../assets/obverse/developer/design-back-dev-29.png":pe,"../assets/obverse/developer/design-back-dev-3.png":be,"../assets/obverse/developer/design-back-dev-30.png":ue,"../assets/obverse/developer/design-back-dev-31.png":he,"../assets/obverse/developer/design-back-dev-32.png":fe,"../assets/obverse/developer/design-back-dev-33.png":me,"../assets/obverse/developer/design-back-dev-34.png":ke,"../assets/obverse/developer/design-back-dev-35.png":xe,"../assets/obverse/developer/design-back-dev-36.png":Ce,"../assets/obverse/developer/design-back-dev-4.png":ye,"../assets/obverse/developer/design-back-dev-5.png":we,"../assets/obverse/developer/design-back-dev-6.png":Ue,"../assets/obverse/developer/design-back-dev-7.png":Me,"../assets/obverse/developer/design-back-dev-8.png":Se,"../assets/obverse/developer/design-back-dev-9.png":Re}[`../assets/obverse/developer/design-back-dev-${s}.png`],self.location).href})}getGameState(){return this._gameState}getPlayingCards(){return this._cards}getMainCard(){return this._mainCard}getReverseURL(){return this._reverseURL}}const je={class:"play relative p-3 h-screen"},Ge={class:"grid gap-4 grid-cols-3 grid-rows-1 h-12 lg:absolute lg:grid-cols-1 lg:grid-rows-3 lg:h-auto"},Le=t("img",{class:"hover:bg-gray-700/70 h-full rounded",src:B,alt:"menu"},null,-1),De={class:"text-center lg:text-left"},Ne=t("h1",{class:"text-gray-400"},"Vreme igre:",-1),Ee={class:"text-2xl font-bold"},ze={class:"text-right lg:text-left"},Ae=t("h2",{class:"text-gray-400"},"Broj poteza:",-1),Be={class:"text-2xl font-bold"},Ie=["src"],Te=["src"],Ve=["onClick"],Oe=["src"],Pe=["src"],$e={key:0,class:"absolute left-1/2 top-1/2 flex flex-col gap-5 justify-center p-8 pt-10 w-full h-full text-center bg-gray-800 rounded opacity-95 transform -translate-x-1/2 -translate-y-1/2 md:max-w-2xl md:h-auto md:border md:border-green-700 md:opacity-100"},Fe=t("p",{class:"text-6xl"},"\u{1F38A} \u{1F973} \u{1F38A}",-1),Ze=t("h1",{class:"text-green-300 text-3xl font-bold"}," Uspeh, prona\u0161li ste sve kartice! ",-1),qe={class:"text-lg"},He=g(" Re\u0161ili ste tabelu "),Je=t("br",null,null,-1),Ke=g(" za "),We=g(" sa "),Qe=g(" koraka "),Xe={class:"flex gap-4 mx-auto"},Ye=g(" PO\u010CETNI MENI"),os={setup(n){const s=I(),e=S(()=>s.state.gameSettings),l=S(()=>u.value==a.value._cards.length);let a=f(new G(e.value)),v=f("Nije po\u010Deto"),u=f(0);function L(){a.value=new G(e.value),v.value="Nije po\u010Deto",u.value=0}function x(_){_.faceUp||(a.value.getGameState()!="running"?(a.value.StartGame(),_.faceUp=!0,D(Date.now())):a.value.getGameState()=="running"&&(_.faceUp=!0,a.value.steps++,setTimeout(function(){_.imageUrl==a.value.getMainCard().imageUrl?(u.value++,_.found=!0,l.value&&a.value.EndGame(),a.value.setMainCard()):_.faceUp=!1},1200)))}function D(_){let d=setInterval(function(){var c=new Date().getTime(),r=c-_,h=Math.floor(r/(1e3*60*60*24)),C=Math.floor(r%(1e3*60*60*24)/(1e3*60*60)),y=Math.floor(r%(1e3*60*60)/(1e3*60)),N=Math.floor(r%(1e3*60)/1e3);v.value=(h>0?h+"d ":"")+(C>0?C+"h ":"")+(y>0?y+"m ":"")+N+"s",a.value.getGameState()=="ended"&&clearInterval(d)},1e3)}return(_,d)=>{const c=T("router-link");return p(),b("main",je,[t("section",Ge,[t("div",null,[R(c,{to:"/"},{default:j(()=>[Le]),_:1})]),t("div",De,[Ne,t("p",Ee,i(o(v)),1)]),t("div",ze,[Ae,t("p",Be,i(o(a).steps),1)])]),t("div",{class:"m-auto mt-8 p-2 text-center lg:mt-20",style:m({maxWidth:"calc((90vh - 5.5rem) * "+o(e).columns*.705/(o(e).rows+1)+")"})},[t("button",{style:m({width:"calc(100%/"+o(e).columns+")"}),class:"flip-card row-span-full hover:translate-x-1 hover:rotate-3",onClick:d[0]||(d[0]=r=>x(o(a).getMainCard()))},[t("div",{class:k(["flip-card-inner ratio-narrow",{flip:o(a).getMainCard().faceUp}])},[t("img",{class:"flip-card-reverse w-full",src:o(a).getReverseURL(),alt:"Zadnja strana"},null,8,Ie),t("img",{class:"flip-card-obverse",src:o(a).getMainCard().imageUrl,alt:"Prednja strana"},null,8,Te)],2)],4),t("section",{class:k(["grid gap-1",{dimmed:o(l)}]),style:m({gridTemplateColumns:"repeat("+o(e).columns+", 1fr)"})},[(p(!0),b(V,null,O(o(a).getPlayingCards(),r=>(p(),b("button",{key:r.id,class:"flip-card hover:translate-x-1 hover:rotate-3",onClick:h=>x(r)},[t("div",{class:k(["flip-card-inner ratio-narrow",{flip:r.faceUp}])},[t("img",{class:"flip-card-reverse w-full",src:o(a).getReverseURL(),alt:"Zadnja strana"},null,8,Oe),t("img",{class:"flip-card-obverse",src:r.imageUrl,alt:"Prednja strana"},null,8,Pe)],2)],8,Ve))),128))],6)],4),o(l)?(p(),b("section",$e,[Fe,Ze,t("p",qe,[He,t("b",null,i(o(e).columns)+"x"+i(o(e).rows),1),Je,Ke,t("b",null,i(o(v)),1),We,t("b",null,i(o(a).steps),1),Qe]),t("div",Xe,[t("button",{class:"button",onClick:d[1]||(d[1]=r=>L())},"NOVA IGRA"),R(c,{to:"/",class:"button"},{default:j(()=>[Ye]),_:1})])])):P("",!0)])}}};export{os as default};
