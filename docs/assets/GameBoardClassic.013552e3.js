var z=Object.defineProperty;var y=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var w=(n,s,e)=>s in n?z(n,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[s]=e,C=(n,s)=>{for(var e in s||(s={}))A.call(s,e)&&w(n,e,s[e]);if(y)for(var e of y(s))E.call(s,e)&&w(n,e,s[e]);return n};import{_ as T}from"./icon-menu.57281e8d.js";import{u as V,a as S,x as m,r as B,o as b,b as u,d as t,e as U,w as G,t as i,f as a,F as I,h as O,y as R,n as P,z as $,A as g}from"./vendor.c385f223.js";import{_ as F,a as q,b as W,c as Z,d as H,e as J,f as K,g as Q,h as X,i as Y,j as ee,k as se,l as te,m as ae,n as oe,o as re,p as le,q as ne,r as _e,s as de,t as ie,u as ge,v as ce,w as ve,x as pe,y as be,z as ue,A as he}from"./index.8551e874.js";class j{constructor(s){this._settings=s,this.steps=0,this._loadAssets(),this._prepareCards()}StartGame(){this._gameState="running",this.steps=0}EndGame(){this._gameState="ended"}_prepareCards(){this._cards=[];const s=Math.floor(this._settings.rows*this._settings.columns/2);let e=this._shuffleCards(this._cardSet).slice(0,s);e=e.concat(e.map(o=>C({},o)));for(let o=0;o<e.length;o++)e[o].id=o;this._cards=this._shuffleCards(e)}_shuffleCards(s){return s.map(e=>({value:e,sort:Math.random()})).sort((e,o)=>e.sort-o.sort).map(({value:e})=>e)}_loadAssets(){switch(this._settings.cardDesign){case"developer":this._loadObverseDeveloper();break;default:this._loadObverseDefault();break}this._reverseURL=new URL({"../assets/reverse/default.png":F,"../assets/reverse/flora.png":q,"../assets/reverse/retro.png":W,"../assets/reverse/royal.png":Z}[`../assets/reverse/${this._settings.backDesign}.png`],self.location).href}async _loadObverseDeveloper(){this._cardSet=[];for(var s=1;s<25;s++)this._cardSet.push({faceUp:!1,imageUrl:new URL({"../assets/obverse/developer/design-back-dev-1.png":H,"../assets/obverse/developer/design-back-dev-10.png":J,"../assets/obverse/developer/design-back-dev-11.png":K,"../assets/obverse/developer/design-back-dev-12.png":Q,"../assets/obverse/developer/design-back-dev-13.png":X,"../assets/obverse/developer/design-back-dev-14.png":Y,"../assets/obverse/developer/design-back-dev-15.png":ee,"../assets/obverse/developer/design-back-dev-16.png":se,"../assets/obverse/developer/design-back-dev-17.png":te,"../assets/obverse/developer/design-back-dev-18.png":ae,"../assets/obverse/developer/design-back-dev-19.png":oe,"../assets/obverse/developer/design-back-dev-2.png":re,"../assets/obverse/developer/design-back-dev-20.png":le,"../assets/obverse/developer/design-back-dev-21.png":ne,"../assets/obverse/developer/design-back-dev-22.png":_e,"../assets/obverse/developer/design-back-dev-23.png":de,"../assets/obverse/developer/design-back-dev-24.png":ie,"../assets/obverse/developer/design-back-dev-3.png":ge,"../assets/obverse/developer/design-back-dev-4.png":ce,"../assets/obverse/developer/design-back-dev-5.png":ve,"../assets/obverse/developer/design-back-dev-6.png":pe,"../assets/obverse/developer/design-back-dev-7.png":be,"../assets/obverse/developer/design-back-dev-8.png":ue,"../assets/obverse/developer/design-back-dev-9.png":he}[`../assets/obverse/developer/design-back-dev-${s}.png`],self.location).href})}getGameState(){return this._gameState}getPlayingCards(){return this._cards}getReverseURL(){return this._reverseURL}}const fe={class:"play relative p-3 h-screen"},me={class:"grid gap-4 grid-cols-3 grid-rows-1 h-12 lg:absolute lg:grid-cols-1 lg:grid-rows-3 lg:h-auto"},ke=t("img",{class:"hover:bg-gray-700/70 h-full rounded",src:T,alt:"menu"},null,-1),xe={class:"text-center lg:text-left"},ye=t("h1",{class:"text-gray-400"},"Vreme igre:",-1),we={class:"text-2xl font-bold"},Ce={class:"text-right lg:text-left"},Se=t("h2",{class:"text-gray-400"},"Broj poteza:",-1),Ue={class:"text-2xl font-bold"},Ge=["onClick"],Re=["src"],je=["src"],Ne={key:0,class:"absolute left-1/2 top-1/2 flex flex-col gap-5 justify-center p-8 pt-10 w-full h-full text-center bg-gray-800 rounded opacity-95 transform -translate-x-1/2 -translate-y-1/2 md:max-w-2xl md:h-auto md:border md:border-green-700 md:opacity-100"},De=t("p",{class:"text-6xl"},"\u{1F973}",-1),Le=t("h1",{class:"text-green-300 text-3xl font-bold"}," Uspeh, uparili ste sve kartice! ",-1),Me={class:"text-lg"},ze=g(" Re\u0161ili ste tabelu "),Ae=t("br",null,null,-1),Ee=g(" za "),Te=g(" sa "),Ve=g(" koraka "),Be={class:"flex gap-4 mx-auto"},Ie=g(" PO\u010CETNI MENI"),qe={setup(n){const s=V(),e=S(()=>s.state.gameSettings),o=S(()=>h.value==r.value._cards.length);let r=m(new j(e.value)),c=m("Nije po\u010Deto"),h=m(0),_=[];function N(){r.value=new j(e.value),c.value="Nije po\u010Deto",h.value=0}function D(d){d.faceUp||(r.value.getGameState()!="running"&&(r.value.StartGame(),L(Date.now())),r.value.getGameState()=="running"&&(d.faceUp=!0,_.push(d),r.value.steps++,_.length>1&&setTimeout(function(){_.length>1&&(_[0].imageUrl==_[1].imageUrl?(h.value+=2,o.value&&r.value.EndGame()):(_[0].faceUp=!1,_[1].faceUp=!1),_.splice(0,2))},1200)))}function L(d){let v=setInterval(function(){var p=new Date().getTime(),l=p-d,f=Math.floor(l/(1e3*60*60*24)),k=Math.floor(l%(1e3*60*60*24)/(1e3*60*60)),x=Math.floor(l%(1e3*60*60)/(1e3*60)),M=Math.floor(l%(1e3*60)/1e3);c.value=(f>0?f+"d ":"")+(k>0?k+"h ":"")+(x>0?x+"m ":"")+M+"s",r.value.getGameState()=="ended"&&clearInterval(v)},1e3)}return(d,v)=>{const p=B("router-link");return b(),u("main",fe,[t("section",me,[t("div",null,[U(p,{to:"/"},{default:G(()=>[ke]),_:1})]),t("div",xe,[ye,t("p",we,i(a(c)),1)]),t("div",Ce,[Se,t("p",Ue,i(a(r).steps),1)])]),t("section",{class:R(["board grid gap-1 m-auto mt-8 p-2 lg:mt-20",{dimmed:a(o)}]),style:P({gridTemplateColumns:"repeat("+a(e).columns+", 1fr)",maxWidth:"calc((90vh - 5.5rem) * "+a(e).columns*.705/a(e).rows+")"})},[(b(!0),u(I,null,O(a(r).getPlayingCards(),l=>(b(),u("button",{key:l.id,class:"flip-card hover:translate-x-1 hover:rotate-3",onClick:f=>D(l)},[t("div",{class:R(["flip-card-inner ratio-narrow",{flip:l.faceUp}])},[t("img",{class:"flip-card-reverse w-full",src:a(r).getReverseURL(),alt:"Zadnja strana"},null,8,Re),t("img",{class:"flip-card-obverse",src:l.imageUrl,alt:"Prednja strana"},null,8,je)],2)],8,Ge))),128))],6),a(o)?(b(),u("section",Ne,[De,Le,t("p",Me,[ze,t("b",null,i(a(e).columns)+"x"+i(a(e).rows),1),Ae,Ee,t("b",null,i(a(c)),1),Te,t("b",null,i(a(r).steps),1),Ve]),t("div",Be,[t("button",{class:"button",onClick:v[0]||(v[0]=l=>N())},"NOVA IGRA"),U(p,{to:"/",class:"button"},{default:G(()=>[Ie]),_:1})])])):$("",!0)])}}};export{qe as default};
