var z=Object.defineProperty;var w=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var U=(n,t,e)=>t in n?z(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,S=(n,t)=>{for(var e in t||(t={}))A.call(t,e)&&U(n,e,t[e]);if(w)for(var e of w(t))E.call(t,e)&&U(n,e,t[e]);return n};import{_ as T,a as V,b as B,c as I,d as O,e as P,f as $,g as F,h as Z,i as q,j as W,k as H,l as J,m as K,n as Q,o as X,p as Y,q as ee,r as se,s as te,t as ae,u as re,v as oe,w as le,x as ne}from"./design-back-dev-9.8b29f70f.js";import{u as _e,a as M,x as m,r as de,o as b,b as u,d as s,e as R,w as j,t as c,f as a,y as k,F as ie,h as ce,n as ge,z as ve,A as g}from"./vendor.c385f223.js";import{_ as pe,a as be,b as ue,c as he}from"./index.d3bc55e3.js";class G{constructor(t){this._settings=t,this.steps=0,this._loadAssets(),this._prepareCards(),this._selectMain()}_selectMain(){let t=this._cards.map(e=>S({},e));this._mainCard=t[Math.floor(Math.random()*t.length)]}StartGame(){this._gameState="running",this.steps=0}EndGame(){this._gameState="ended"}_prepareCards(){this._cards=[];const t=this._settings.rows*this._settings.columns;let e=this._cardSet.slice(0,t);for(let l=0;l<e.length;l++)e[l].id=l;this._cards=this._shuffleCards(e)}_shuffleCards(t){return t.map(e=>({value:e,sort:Math.random()})).sort((e,l)=>e.sort-l.sort).map(({value:e})=>e)}_loadAssets(){switch(this._settings.cardDesign){case"developer":this._loadObverseDeveloper();break;default:this._loadObverseDefault();break}this._reverseURL=new URL({"../assets/reverse/default.png":pe,"../assets/reverse/flora.png":be,"../assets/reverse/retro.png":ue,"../assets/reverse/royal.png":he}[`../assets/reverse/${this._settings.backDesign}.png`],self.location).href}async _loadObverseDeveloper(){this._cardSet=[];for(var t=1;t<25;t++)this._cardSet.push({faceUp:!1,imageUrl:new URL({"../assets/obverse/developer/design-back-dev-1.png":T,"../assets/obverse/developer/design-back-dev-10.png":V,"../assets/obverse/developer/design-back-dev-11.png":B,"../assets/obverse/developer/design-back-dev-12.png":I,"../assets/obverse/developer/design-back-dev-13.png":O,"../assets/obverse/developer/design-back-dev-14.png":P,"../assets/obverse/developer/design-back-dev-15.png":$,"../assets/obverse/developer/design-back-dev-16.png":F,"../assets/obverse/developer/design-back-dev-17.png":Z,"../assets/obverse/developer/design-back-dev-18.png":q,"../assets/obverse/developer/design-back-dev-19.png":W,"../assets/obverse/developer/design-back-dev-2.png":H,"../assets/obverse/developer/design-back-dev-20.png":J,"../assets/obverse/developer/design-back-dev-21.png":K,"../assets/obverse/developer/design-back-dev-22.png":Q,"../assets/obverse/developer/design-back-dev-23.png":X,"../assets/obverse/developer/design-back-dev-24.png":Y,"../assets/obverse/developer/design-back-dev-3.png":ee,"../assets/obverse/developer/design-back-dev-4.png":se,"../assets/obverse/developer/design-back-dev-5.png":te,"../assets/obverse/developer/design-back-dev-6.png":ae,"../assets/obverse/developer/design-back-dev-7.png":re,"../assets/obverse/developer/design-back-dev-8.png":oe,"../assets/obverse/developer/design-back-dev-9.png":le}[`../assets/obverse/developer/design-back-dev-${t}.png`],self.location).href})}getGameState(){return this._gameState}getPlayingCards(){return this._cards}getMainCard(){return this._mainCard}getReverseURL(){return this._reverseURL}}const fe={class:"play relative p-3 h-screen"},me={class:"grid gap-4 grid-cols-3 grid-rows-1 h-12 lg:absolute lg:grid-cols-1 lg:grid-rows-3 lg:h-auto"},ke=s("img",{class:"hover:bg-gray-700/70 h-full rounded",src:ne,alt:"menu"},null,-1),xe={class:"text-center lg:text-left"},Ce=s("h1",{class:"text-gray-400"},"Vreme igre:",-1),ye={class:"text-2xl font-bold"},we={class:"text-right lg:text-left"},Ue=s("h2",{class:"text-gray-400"},"Broj poteza:",-1),Se={class:"text-2xl font-bold"},Me=["src"],Re=["src"],je=["onClick"],Ge=["src"],De=["src"],Ne={key:0,class:"absolute left-1/2 top-1/2 flex flex-col gap-5 justify-center p-8 pt-10 w-full h-full text-center bg-gray-800 rounded opacity-95 transform -translate-x-1/2 -translate-y-1/2 md:max-w-2xl md:h-auto md:border md:border-green-700 md:opacity-100"},Le=s("p",{class:"text-6xl"},"\u{1F973}",-1),ze=s("h1",{class:"text-green-300 text-3xl font-bold"}," Uspeh, uparili ste sve kartice! ",-1),Ae={class:"text-lg"},Ee=g(" Re\u0161ili ste tabelu "),Te=s("br",null,null,-1),Ve=g(" za "),Be=g(" sa "),Ie=g(" koraka "),Oe={class:"flex gap-4 mx-auto"},Pe=g(" PO\u010CETNI MENI"),We={setup(n){const t=_e(),e=M(()=>t.state.gameData),l=M(()=>h.value==r.value._cards.length);let r=m(new G(e.value)),v=m("Nije po\u010Deto"),h=m(0),_=[];function D(){r.value=new G(e.value),v.value="Nije po\u010Deto",h.value=0}function x(d){d.faceUp||(r.value.getGameState()!="running"&&(r.value.StartGame(),N(Date.now())),r.value.getGameState()=="running"&&(d.faceUp=!0,_.push(d),r.value.steps++,_.length>1&&setTimeout(function(){_.length>1&&(_[0].imageUrl==_[1].imageUrl?(h.value+=2,l.value&&r.value.EndGame()):(_[0].faceUp=!1,_[1].faceUp=!1),_.splice(0,2))},1200)))}function N(d){let i=setInterval(function(){var p=new Date().getTime(),o=p-d,f=Math.floor(o/(1e3*60*60*24)),C=Math.floor(o%(1e3*60*60*24)/(1e3*60*60)),y=Math.floor(o%(1e3*60*60)/(1e3*60)),L=Math.floor(o%(1e3*60)/1e3);v.value=(f>0?f+"d ":"")+(C>0?C+"h ":"")+(y>0?y+"m ":"")+L+"s",r.value.getGameState()=="ended"&&clearInterval(i)},1e3)}return(d,i)=>{const p=de("router-link");return b(),u("main",fe,[s("section",me,[s("div",null,[R(p,{to:"/"},{default:j(()=>[ke]),_:1})]),s("div",xe,[Ce,s("p",ye,c(a(v)),1)]),s("div",we,[Ue,s("p",Se,c(a(r).steps),1)])]),s("section",{class:k(["board grid gap-1 m-auto mt-8 p-2 lg:mt-20",{dimmed:a(l)}]),style:ge({gridTemplateColumns:"repeat("+a(e).columns+", 1fr)",maxWidth:"calc((90vh - 5.5rem) * "+a(e).columns*.705/a(e).rows+")"})},[s("button",{class:"flip-card hover:translate-x-1 hover:rotate-3",onClick:i[0]||(i[0]=o=>x(a(r)._mainCard))},[s("div",{class:k(["flip-card-inner ratio-narrow",{flip:a(r)._mainCard.faceUp}])},[s("img",{class:"flip-card-reverse w-full",src:a(r).getReverseURL(),alt:"Zadnja strana"},null,8,Me),s("img",{class:"flip-card-obverse",src:a(r).getMainCard().imageUrl,alt:"Prednja strana"},null,8,Re)],2)]),(b(!0),u(ie,null,ce(a(r).getPlayingCards(),o=>(b(),u("button",{key:o.id,class:"flip-card hover:translate-x-1 hover:rotate-3",onClick:f=>x(o)},[s("div",{class:k(["flip-card-inner ratio-narrow",{flip:!o.faceUp}])},[s("img",{class:"flip-card-reverse w-full",src:a(r).getReverseURL(),alt:"Zadnja strana"},null,8,Ge),s("img",{class:"flip-card-obverse",src:o.imageUrl,alt:"Prednja strana"},null,8,De)],2)],8,je))),128))],6),a(l)?(b(),u("section",Ne,[Le,ze,s("p",Ae,[Ee,s("b",null,c(a(e).columns)+"x"+c(a(e).rows),1),Te,Ve,s("b",null,c(a(v)),1),Be,s("b",null,c(a(r).steps),1),Ie]),s("div",Oe,[s("button",{class:"button",onClick:i[1]||(i[1]=o=>D())},"NOVA IGRA"),R(p,{to:"/",class:"button"},{default:j(()=>[Pe]),_:1})])])):ve("",!0)])}}};export{We as default};
