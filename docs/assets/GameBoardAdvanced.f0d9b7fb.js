var z=Object.defineProperty;var w=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var U=(n,s,e)=>s in n?z(n,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[s]=e,S=(n,s)=>{for(var e in s||(s={}))A.call(s,e)&&U(n,e,s[e]);if(w)for(var e of w(s))E.call(s,e)&&U(n,e,s[e]);return n};import{_ as T}from"./icon-menu.57281e8d.js";import{u as V,a as M,x as m,r as B,o as p,b as u,d as t,e as R,w as j,t as d,f as r,n as f,y as k,F as I,h as O,z as P,A as c}from"./vendor.c385f223.js";import{_ as $,a as F,b as Z,c as q,d as W,e as H,f as J,g as K,h as Q,i as X,j as Y,k as ee,l as se,m as te,n as ae,o as re,p as oe,q as le,r as ne,s as ie,t as _e,u as de,v as ce,w as ge,x as ve,y as pe,z as ue,A as be}from"./index.8551e874.js";class G{constructor(s){this._settings=s,this.steps=0,this._loadAssets(),this._prepareCards(),this.setMainCard()}setMainCard(){let s=this._cards.map(e=>S({},e));this._gameState=="running"&&(s=s.filter(e=>e.found!=!0)),console.log(s),this._mainCard=s[Math.floor(Math.random()*s.length)],this._mainCard.faceUp=!this._mainCard.faceUp,console.log(this._mainCard)}StartGame(){this._cards.forEach(s=>{s.faceUp=!1}),this._gameState="running",this.steps=0}EndGame(){this._gameState="ended"}_prepareCards(){this._cards=[];const s=this._settings.rows*this._settings.columns;let e=this._cardSet.slice(0,s);for(let l=0;l<e.length;l++)e[l].id=l;this._cards=this._shuffleCards(e)}_shuffleCards(s){return s.map(e=>({value:e,sort:Math.random()})).sort((e,l)=>e.sort-l.sort).map(({value:e})=>e)}_loadAssets(){switch(this._settings.cardDesign){case"developer":this._loadObverseDeveloper();break;default:this._loadObverseDefault();break}this._reverseURL=new URL({"../assets/reverse/default.png":$,"../assets/reverse/flora.png":F,"../assets/reverse/retro.png":Z,"../assets/reverse/royal.png":q}[`../assets/reverse/${this._settings.backDesign}.png`],self.location).href}async _loadObverseDeveloper(){this._cardSet=[];for(var s=1;s<25;s++)this._cardSet.push({faceUp:!0,imageUrl:new URL({"../assets/obverse/developer/design-back-dev-1.png":W,"../assets/obverse/developer/design-back-dev-10.png":H,"../assets/obverse/developer/design-back-dev-11.png":J,"../assets/obverse/developer/design-back-dev-12.png":K,"../assets/obverse/developer/design-back-dev-13.png":Q,"../assets/obverse/developer/design-back-dev-14.png":X,"../assets/obverse/developer/design-back-dev-15.png":Y,"../assets/obverse/developer/design-back-dev-16.png":ee,"../assets/obverse/developer/design-back-dev-17.png":se,"../assets/obverse/developer/design-back-dev-18.png":te,"../assets/obverse/developer/design-back-dev-19.png":ae,"../assets/obverse/developer/design-back-dev-2.png":re,"../assets/obverse/developer/design-back-dev-20.png":oe,"../assets/obverse/developer/design-back-dev-21.png":le,"../assets/obverse/developer/design-back-dev-22.png":ne,"../assets/obverse/developer/design-back-dev-23.png":ie,"../assets/obverse/developer/design-back-dev-24.png":_e,"../assets/obverse/developer/design-back-dev-3.png":de,"../assets/obverse/developer/design-back-dev-4.png":ce,"../assets/obverse/developer/design-back-dev-5.png":ge,"../assets/obverse/developer/design-back-dev-6.png":ve,"../assets/obverse/developer/design-back-dev-7.png":pe,"../assets/obverse/developer/design-back-dev-8.png":ue,"../assets/obverse/developer/design-back-dev-9.png":be}[`../assets/obverse/developer/design-back-dev-${s}.png`],self.location).href})}getGameState(){return this._gameState}getPlayingCards(){return this._cards}getMainCard(){return this._mainCard}getReverseURL(){return this._reverseURL}}const he={class:"play relative p-3 h-screen"},me={class:"grid gap-4 grid-cols-3 grid-rows-1 h-12 lg:absolute lg:grid-cols-1 lg:grid-rows-3 lg:h-auto"},fe=t("img",{class:"hover:bg-gray-700/70 h-full rounded",src:T,alt:"menu"},null,-1),ke={class:"text-center lg:text-left"},xe=t("h1",{class:"text-gray-400"},"Vreme igre:",-1),Ce={class:"text-2xl font-bold"},ye={class:"text-right lg:text-left"},we=t("h2",{class:"text-gray-400"},"Broj poteza:",-1),Ue={class:"text-2xl font-bold"},Se=["src"],Me=["src"],Re=["onClick"],je=["src"],Ge=["src"],Le={key:0,class:"absolute left-1/2 top-1/2 flex flex-col gap-5 justify-center p-8 pt-10 w-full h-full text-center bg-gray-800 rounded opacity-95 transform -translate-x-1/2 -translate-y-1/2 md:max-w-2xl md:h-auto md:border md:border-green-700 md:opacity-100"},Ne=t("p",{class:"text-6xl"},"\u{1F38A} \u{1F973} \u{1F38A}",-1),De=t("h1",{class:"text-green-300 text-3xl font-bold"}," Uspeh, prona\u0161li ste sve kartice! ",-1),ze={class:"text-lg"},Ae=c(" Re\u0161ili ste tabelu "),Ee=t("br",null,null,-1),Te=c(" za "),Ve=c(" sa "),Be=c(" koraka "),Ie={class:"flex gap-4 mx-auto"},Oe=c(" PO\u010CETNI MENI"),qe={setup(n){const s=V(),e=M(()=>s.state.gameSettings),l=M(()=>b.value==a.value._cards.length);let a=m(new G(e.value)),g=m("Nije po\u010Deto"),b=m(0);function L(){a.value=new G(e.value),g.value="Nije po\u010Deto",b.value=0}function x(i){i.faceUp||(a.value.getGameState()!="running"?(a.value.StartGame(),i.faceUp=!0,N(Date.now())):a.value.getGameState()=="running"&&(i.faceUp=!0,a.value.steps++,setTimeout(function(){i.imageUrl==a.value.getMainCard().imageUrl?(b.value++,i.found=!0,l.value&&a.value.EndGame(),a.value.setMainCard()):i.faceUp=!1},1200)))}function N(i){let _=setInterval(function(){var v=new Date().getTime(),o=v-i,h=Math.floor(o/(1e3*60*60*24)),C=Math.floor(o%(1e3*60*60*24)/(1e3*60*60)),y=Math.floor(o%(1e3*60*60)/(1e3*60)),D=Math.floor(o%(1e3*60)/1e3);g.value=(h>0?h+"d ":"")+(C>0?C+"h ":"")+(y>0?y+"m ":"")+D+"s",a.value.getGameState()=="ended"&&clearInterval(_)},1e3)}return(i,_)=>{const v=B("router-link");return p(),u("main",he,[t("section",me,[t("div",null,[R(v,{to:"/"},{default:j(()=>[fe]),_:1})]),t("div",ke,[xe,t("p",Ce,d(r(g)),1)]),t("div",ye,[we,t("p",Ue,d(r(a).steps),1)])]),t("div",{class:"m-auto mt-8 p-2 text-center lg:mt-20",style:f({maxWidth:"calc((90vh - 5.5rem) * "+r(e).columns*.705/(r(e).rows+1)+")"})},[t("button",{style:f({width:"calc(100%/"+r(e).columns+")"}),class:"flip-card row-span-full hover:translate-x-1 hover:rotate-3",onClick:_[0]||(_[0]=o=>x(r(a).getMainCard()))},[t("div",{class:k(["flip-card-inner ratio-narrow",{flip:r(a).getMainCard().faceUp}])},[t("img",{class:"flip-card-reverse w-full",src:r(a).getReverseURL(),alt:"Zadnja strana"},null,8,Se),t("img",{class:"flip-card-obverse",src:r(a).getMainCard().imageUrl,alt:"Prednja strana"},null,8,Me)],2)],4),t("section",{class:k(["grid gap-1",{dimmed:r(l)}]),style:f({gridTemplateColumns:"repeat("+r(e).columns+", 1fr)"})},[(p(!0),u(I,null,O(r(a).getPlayingCards(),o=>(p(),u("button",{key:o.id,class:"flip-card hover:translate-x-1 hover:rotate-3",onClick:h=>x(o)},[t("div",{class:k(["flip-card-inner ratio-narrow",{flip:o.faceUp}])},[t("img",{class:"flip-card-reverse w-full",src:r(a).getReverseURL(),alt:"Zadnja strana"},null,8,je),t("img",{class:"flip-card-obverse",src:o.imageUrl,alt:"Prednja strana"},null,8,Ge)],2)],8,Re))),128))],6)],4),r(l)?(p(),u("section",Le,[Ne,De,t("p",ze,[Ae,t("b",null,d(r(e).columns)+"x"+d(r(e).rows),1),Ee,Te,t("b",null,d(r(g)),1),Ve,t("b",null,d(r(a).steps),1),Be]),t("div",Ie,[t("button",{class:"button",onClick:_[1]||(_[1]=o=>L())},"NOVA IGRA"),R(v,{to:"/",class:"button"},{default:j(()=>[Oe]),_:1})])])):P("",!0)])}}};export{qe as default};
